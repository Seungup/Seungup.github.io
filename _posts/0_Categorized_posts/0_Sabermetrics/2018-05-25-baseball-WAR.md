---
title: 야구) 이제 WAR을 계산해봅시다. 
category: baseball
tags: baseball WAR sabermetrics wOBA wRAA UZR RAR
---

- 우선 [이 포스트](http://birdsnest.tistory.com/141)에서 내용을 참고하여 작성되었습니다. 링크한 포스트가 없었다면 이 포스트는 작성될 수 없었을 것임을 분명하게 밝힙니다. 

## 타자편: WAR - Wins Above Replacement

- 지금까지 포스트들에서 다음들을 다루었습니다. 
    - 타격) 타석에서의 이벤트와 실제 득점과의 연계성을 평가하여 wOBA, wRAA를 계산
    - 수비) 낙구 지역별로 weight(평균 실점)를 주고 +/- 하여 계산 UZR을 계산
    - 도루/주루) 도루 성공/실패, eqBRR
    - 대체선수 대비) Replacement Level(평균 수준이 아닌 언제든 1.9군의 레벨)
    - 포지션 별 차이) 커리어 기간동안 2개 이상의 포지션을 소화한 선수들의 포지션별 수비능력의 차이
    - 파크팩터) 투수/타자 친화 구장을 고려하여 해당 구장에서의 지표를 조정
- 결국 지금까지의 포스트는 타자의 가치를 평가하기 위한 세부적인 지표들을 설명하기 위함이었고요. 이전에도 말한 바와 같이 **좋은 타자**란 1) 잘 치고(타격), 2) 잘 막고(수비), 3) 잘 달리고(도루 및 주루) 로 설명할 수 있습니다. 
    - 또한, OPS 등의 지표들과는 다르게 이 지표들은 모두 **득점과의 연계성**을 중심으로 평가되었다는 점이 중요합니다. 타격/수비/도루 및 주루 가 모두 '득점'과 연결되어 계산되어 있으므로 다 합친 다음에 더하기만 해도 된다는 것이죠. 

- 따라서, 이 지표들을 다 고려하면, 최종적으로 우리가 구하려는 선수의 실제 가치 WAR을 알 수 있습니다. 
- 제가 다 까먹어서 하하핫. 하나하나를 복습하면서 다시 진행하려고 해요 

## WAR의 큰 그림 그리고 RAR

- WAR(Wins Above Replacement level)을 계산하기 위해서 우선 RAR(Runs Above Replacement)을 계산합니다. 대체선수 대비 승수를 계산하려면, 대체선수 대비 득점을 얼마나 하였는가? 를 알아야 하죠.
- 또한 세이버메트릭스를 공부하면서 느끼는 거지만, 계산의 편의성을 위해서, 생략하는 부분들이 많습니다. WAR의 경우도 그냥 RAR에서 10을 나누어 계산합니다(10점은 1승)이라는 가정을 기본적으로 깔고 가는 것이죠. 리그마다, 그리고 시즌마다 다를 수 있기 때문에 이 부분은 피타고리안 계산법을 활용해서 조정이 필요합니다. 
 
- 일단 전체 프레임을 짜고 들어가는게 좋을 것 같습니다. 앞서 나온 지표들(타격, 수비, 도루/주루, 포지션별 차이)를 모두 더하면 RAR(Runs Above Replacement level)이 나옵니다. 

$$
RAR = wRAA + Replacement Level + UZR + Positional Adjusment + SB/CS Runs
WAR = RAR/10.0
$$

## 타격) wOBA, wRAA 계산하기 

- RE(Runs Expectancy): 24가지 상황(아웃카운트, 루상 주자)별로 **해당 이닝이 종료될 때까지** 획득한 득점의 평균
- RV(Runs Value): 타석에서의 이벤트(안타, 사구) 발생 후 득점 기대값(RE) + 해당 이벤트로 인해 발생한 득점 + 이벤트 발생전 득점 기대값
    - 예를 들어서, 이사 만루 상황에서 만루 홈런을 쳤을때, 여기서 홈런의 득점 가치(RV)는? 0.117+4.0-0.85
        - 이사만루 시 RE: 0.85 (역대 이사만루 부터 이닝 종료까지 발생한 득점 평균)
        - 홈런으로 인한 득점: 4.0 
        - 무사주자없음 시 RE: 0.117 (역대 무사주자없음 부터 이닝 종료까지 발생한 득점 평균)

### wOBA: 타석 별 평균 득점 생산력

- 앞서 계산한 RV 값들에 일괄적으로 0.299를 더한다(아웃이 -0.299이기 때문에 normalization).
- 이렇게 변경된 RV 값을 타격 이벤트 수와 곱하고, 타석 수로 나눠준다.(ex: (홈런 RV+0.299) * 홈런 수 + ... / PA 수)
- 최종 wOBA값을 OPS와 비슷한 수준으로 스케일링하기 위해서 1.15을 곱해준다. 

$$
wOBA = { (0.72 * NIBB) + (0.75 * HBP) + (0.90 * 1B) + (0.92 * RBOE) + (1.24 * 2B) + (1.56 * 3B) + ( 1.95 * HR ) } \over PA(Plate Appeareance)
$$

### wRAA: 평균 타자 대비 득점 생산력

- 리그의 평균 선수들에 비해서 얼마나 득점 생산에 많이 기여했는지를 보여줍니다. wOBA의 경우 타석수로 나누어 평균적인 득점 생산력을 보았다면, wRAA의 경우는 타석 수를 곱하여, 평균 선수들에 비해서 얼마나 많은 득점에 더 기여했는지를 평가합니다. 

$$
wRAA = ((wOBA - lgwOBA) / 1.15) * PA
lgwOBA = 리그 평균 wOBA
$$

- 하지만, 앞서 본 것처럼 `war`에서는 `replacement level`을 기준으로 으로 보고 있는데, wRAA에서는 **평균적인 선수**를 기준점으로 보고 있다는 것이 차이 입니다. 

- 이를 조정하기 위해서 [제가 참고한 포스트](http://birdsnest.tistory.com/86?category=190760)에서는 '평균적인 주전 선수'와 대체 가능한 선수와는 대략 600타석당 20점 정도의 차이가 난다는 것이 정설이며, 따라서 이 차이를 고려해서 해당 선수의 replacement level을 설정할 수 있다, 고 말하고 있습니다. 
    - 해당 포스트에서는 **체이스 어틀리**라는 MLB의 선수를 기준으로 설명하고 있다. 하지만 내가 MLB를 모름...
    - 여기서는 이를 고려하여, **체이스 어틀리보다 600타석에서 20 득점이 적은 가상의 선수**를 replacement level로 설정하였는데, 이것이 합리적인 전개가 아닌 것 같은 느낌이다(물론 내가 잘 몰라서 그런 것일수도 있지만). 흐음...


## 수비) UZR 계산하기

- UZR은 전체 그라운드에서 낙구별로 득점과의 연계성이 다르고, 실점과 연결되기 쉬운 낙구를 막아냈을 경우에 높아지는 지표가 된다. **실점 억제력** 정도로 해석할 수 있을 것 같다. 

## 포지션별 조정) Positional Adjustment 

- MLB에서 동시에 두 가지 이상의 포지션을 수행한 적이 있는 선수들을 대상으로 포지션별 수비능력의 차이를 분석하였고, 다음과 같은 결론을 내렸습니다(162경기, 1458 이닝 기준)
    - 포수 : +12.5 Runs
    - 유격수 : +7.5 Runs
    - 중견수, 2루수, 3루수 : +2.5 Runs
    - 좌익수, 우익수 : -7.5 Runs
    - 1루수 : -12.5 Runs
    - 지명타자 : -17.5 Runs
- WAR을 계산하려는 선수가 1루수로 300이닝, 지명타자로 100이닝을 뛰었다면, 
    - -12.5 *(300/1458) + -17.5*(100/1458) 이 해당 선수의 포지션 조정점수가 됩니다. 

## 주루 및 도루) SB + CS

- 도루 성공 실패에 따른 득점 가치(RV)를 평균으로 낸 것이 있으며, 이는 각각 0.175, -0.467이 된다. 
    - 도루 성공(SB, Stolen Base) : 0.175 Runs, 도루 실패(CS, Caught Stealing) : -0.467 
- 비교적 단순하게, 도루 성공/실패 개수를 여기에 더하여 계산함

## RAR, WAR 계산하기 

- 결국 이를 다 더하면, RAR이 나오며, 이를 아주 간단하게 10으로 나누면 WAR이 나온다. 

$$
RAR = wRAA + Replacement Level + UZR + Positional Adjusment + SB/CS Runs
WAR = RAR/10.0
$$


## wrap-up

- 이렇게 하면 타격, 수비, 도루 및 주루, 포지션별 조정 대비 득점과의 연계성을 평가할 수 있다고 하는데, 음..이게 마이너스인 경우는 어떻게 되는것인가?? 
    - wOBA는 양수이지만 wRAA는 음수(평균 선수 대비 득점생산력)이므로, 득점 생산력이 형편없을 경우 마이너스가 나올 수 있음. 권용관의 경우 예전에 유격수였으면서(포지션 조정 값에서 이득을 봄에도) WAR이 음수가 나왔는데, 이는 타격 능력이 매우 형편없었다는 이야기가 됨. 
- WAR을 계산할 때, 비교적 간단하게 10.0으로 나누어 계산했는데, 그렇게 하지 않고 그냥 RAR로 두는 것이 낫지 않나? 굳이 이렇게 할 필요가 있나? 

- 약간, 세이버메트릭은 공부할수록 더 알아야 하는 것들이 많아지는 느낌이다. 또 생각보다, **계산의 편의성**을 위해서 엄밀함을 과감하게 포기하는 부분들이 많아서, 늘, 엄밀한 것을 따지는 나에게는 조금 낯설기도 하고. 